<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>HTML + CSS</title>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <h1>Impressora maluca (abra o console)</h1>
    <button>Imprimir</button>
    <button id="list">Listar Impressoras</button>
    <p id="status">Aguardando impressão</p>
  </body>
  <script type="module">
    const printersButton = document.querySelector("button");
    const status = document.querySelector("#status");
    const list = document.querySelector("#list");
    import BrotherSdk from "https://cdn.jsdelivr.net/npm/bpac-js@latest/dist/index.js";
    const tag = new BrotherSdk({
      templatePath: "C:/Users/AnaMariadeLucca/Downloads/teste.lbx",
      exportPath: "",
    });
    const data = {
      nome_participante: "John Doe",
      empresa: "Doe's Company",
    };
    const getPrinters = async () => {
      try {
        const printers = await BrotherSdk.getPrinterList();
        status.innerText = JSON.stringify(printers);
        console.log({ printers }); // Output: {printers: ["Brother QL-820NWB", "Brother PT-9800PCN"]}
      } catch (error) {
        status.innerText = `ERROR: ${error}\n\nPara mais informações olhe o console`;
        console.log({ error });
      }
    };
    const print = async () => {
      status.innerText = "";
      try {
        status.innerText = "Imprimindo";
        const printers = await tag.print(data);
        console.log({ printers });
        status.innerText = "Impressão concluída";
      } catch (error) {
        status.innerText = `ERROR: ${error}\n\nPara mais informações olhe o console`;
        console.log({ error });
      }
    };
    printersButton.addEventListener("click", print);
    list.addEventListener("click", getPrinters);
  </script>
</html>
